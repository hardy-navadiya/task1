<h3 style="text-align: center;">Client details</h3>

<%= render 'form', client: @client %> <br>

<table class="clients" style="text-align:center;">
	<tr>
		<th>Name</th>
		<th>Email</th>
		<th>Edit</th>
		<th>Delete</th>
		<th>Show</th>
	</tr>

	<% @clients.each do |client| %>
  <tbody>
    <tr class="tr_<%= client.id %>">
      <td><%= client.name %></td>
      <td><%= client.email %></td>
      <td><%= link_to 'Edit', edit_client_path(client), class:"nav-link" %></td>
     <!--  <td><%#= button_to 'Delete', destroyclient_path, method: :delete,class:"btn btn-danger" %></td> -->
     	<td><button class="btn btn-danger del" data-id="<%= client.id %>">Delete</button></td>
      <td><%= link_to 'Show', client_path(client), class:"nav-link" %></td>
    </tr>
  </tbody>
  <% end %>
</table>

<script type="text/javascript">
		$(document).ready(function(){
		  $(document).on('click', '.del', function(event) {
		  	console.log('inside click-->',$(this).data('id'));
		    $.ajax({
		    	url: '/destroyclient',
		    	type: 'DELETE',
		    	dataType: 'script',
		    	data: {id: $(this).data('id')},
          beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		    })
		    .done(function() {
		    	console.log("success");
		    })
		    .fail(function() {
		    	console.log("error");
		    })
		    .always(function() {
		    	console.log("complete");
		    });
		  });
		});
</script>